<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hazard Perception - SafeTrain360</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <a href="/module" class="back-link">
                <span class="back-arrow">&#8592;</span>
                Back to Modules
            </a>
            <div class="logo-small">
                <svg viewBox="0 0 100 100" width="40" height="40">
                    <circle cx="50" cy="50" r="45" fill="#2563eb"/>
                    <text x="50" y="58" text-anchor="middle" fill="white" font-size="24" font-weight="bold">360</text>
                </svg>
                <span class="logo-text">SafeTrain360</span>
            </div>
        </header>

        <main class="main-content hazard-content">
            <div class="module-header">
                <h1 class="page-title">Hazard Perception Training</h1>
                <div class="score-display">
                    <span class="score-label">Hazards Found:</span>
                    <span class="score-value" id="hazardScore">0</span>
                    <span class="score-total">/ 5</span>
                </div>
            </div>

            <div class="instruction-box">
                <div class="instruction-icon">
                    <svg viewBox="0 0 40 40" width="30" height="30">
                        <circle cx="20" cy="20" r="18" fill="#3b82f6"/>
                        <text x="20" y="26" text-anchor="middle" fill="white" font-size="20" font-weight="bold">i</text>
                    </svg>
                </div>
                <p><strong>Instructions:</strong> Click on the hazards you can see in the warehouse scene below. Look for spillages, loose boxes, blocked exits, and unsafe items.</p>
            </div>

            <div class="scene-container">
                <div class="warehouse-scene" id="warehouseScene">
                    <svg viewBox="0 0 1000 600" class="warehouse-svg">
                        <rect x="0" y="0" width="1000" height="600" fill="#e5e7eb"/>
                        <rect x="0" y="400" width="1000" height="200" fill="#9ca3af"/>
                        <rect x="50" y="150" width="150" height="250" fill="#6b7280"/>
                        <rect x="55" y="160" width="140" height="50" fill="#f59e0b"/>
                        <rect x="55" y="215" width="140" height="50" fill="#f59e0b"/>
                        <rect x="55" y="270" width="140" height="50" fill="#f59e0b"/>
                        <rect x="55" y="325" width="140" height="50" fill="#f59e0b"/>
                        <rect x="250" y="150" width="150" height="250" fill="#6b7280"/>
                        <rect x="255" y="160" width="140" height="50" fill="#f59e0b"/>
                        <rect x="255" y="215" width="140" height="50" fill="#f59e0b"/>
                        <rect x="255" y="270" width="140" height="50" fill="#f59e0b"/>
                        <rect x="255" y="325" width="140" height="50" fill="#f59e0b"/>
                        <rect x="600" y="100" width="180" height="300" fill="#6b7280"/>
                        <rect x="605" y="110" width="170" height="60" fill="#f59e0b"/>
                        <rect x="605" y="180" width="170" height="60" fill="#f59e0b"/>
                        <rect x="605" y="250" width="170" height="60" fill="#f59e0b"/>
                        <rect x="605" y="320" width="170" height="60" fill="#f59e0b"/>
                        <rect x="850" y="50" width="120" height="350" fill="#374151"/>
                        <rect x="860" y="60" width="100" height="330" fill="#1f2937"/>
                        <text x="910" y="230" text-anchor="middle" fill="#ef4444" font-size="16" font-weight="bold">EXIT</text>
                        <rect x="30" y="450" width="200" height="120" fill="#fbbf24"/>
                        <text x="130" y="520" text-anchor="middle" fill="#1f2937" font-size="18">FORKLIFT</text>
                    </svg>

                    <button class="hazard-hotspot" id="hazard1" data-hazard="spillage" style="left: 45%; top: 70%; width: 80px; height: 40px;" onclick="clickHazard(1)" aria-label="Floor spillage hazard" type="button">
                        <div class="hazard-visual spillage">
                            <svg viewBox="0 0 80 40" width="80" height="40">
                                <ellipse cx="40" cy="20" rx="38" ry="18" fill="#3b82f6" opacity="0.7"/>
                                <ellipse cx="35" cy="22" rx="25" ry="12" fill="#60a5fa" opacity="0.6"/>
                            </svg>
                        </div>
                    </button>

                    <button class="hazard-hotspot" id="hazard2" data-hazard="loose-boxes" style="left: 42%; top: 45%; width: 70px; height: 60px;" onclick="clickHazard(2)" aria-label="Loose stacked boxes hazard" type="button">
                        <div class="hazard-visual boxes">
                            <svg viewBox="0 0 70 60" width="70" height="60">
                                <rect x="5" y="30" width="30" height="25" fill="#f59e0b" stroke="#d97706" stroke-width="2" transform="rotate(-15, 20, 42)"/>
                                <rect x="25" y="20" width="35" height="30" fill="#fbbf24" stroke="#f59e0b" stroke-width="2" transform="rotate(10, 42, 35)"/>
                                <rect x="15" y="5" width="25" height="20" fill="#fcd34d" stroke="#fbbf24" stroke-width="2" transform="rotate(-8, 27, 15)"/>
                            </svg>
                        </div>
                    </button>

                    <button class="hazard-hotspot" id="hazard3" data-hazard="blocked-exit" style="left: 85%; top: 15%; width: 100px; height: 80px;" onclick="clickHazard(3)" aria-label="Blocked emergency exit hazard" type="button">
                        <div class="hazard-visual blocked-exit">
                            <svg viewBox="0 0 100 80" width="100" height="80">
                                <rect x="10" y="10" width="35" height="30" fill="#f59e0b"/>
                                <rect x="50" y="15" width="40" height="35" fill="#fbbf24"/>
                                <rect x="20" y="45" width="60" height="25" fill="#f59e0b"/>
                            </svg>
                        </div>
                    </button>

                    <button class="hazard-hotspot" id="hazard4" data-hazard="cable" style="left: 55%; top: 75%; width: 120px; height: 20px;" onclick="clickHazard(4)" aria-label="Trailing cable hazard" type="button">
                        <div class="hazard-visual cable">
                            <svg viewBox="0 0 120 20" width="120" height="20">
                                <path d="M5 10 Q30 5, 60 12 T115 8" stroke="#1f2937" stroke-width="4" fill="none"/>
                                <circle cx="5" cy="10" r="5" fill="#4b5563"/>
                                <circle cx="115" cy="8" r="5" fill="#4b5563"/>
                            </svg>
                        </div>
                    </button>

                    <button class="hazard-hotspot" id="hazard5" data-hazard="broken-pallet" style="left: 8%; top: 60%; width: 80px; height: 50px;" onclick="clickHazard(5)" aria-label="Broken pallet hazard" type="button">
                        <div class="hazard-visual pallet">
                            <svg viewBox="0 0 80 50" width="80" height="50">
                                <rect x="5" y="35" width="70" height="10" fill="#92400e"/>
                                <rect x="10" y="25" width="15" height="12" fill="#a16207"/>
                                <rect x="55" y="25" width="15" height="12" fill="#a16207"/>
                                <line x1="35" y1="25" x2="50" y2="40" stroke="#78350f" stroke-width="3"/>
                                <rect x="30" y="5" width="25" height="22" fill="#f59e0b" transform="rotate(5, 42, 16)"/>
                            </svg>
                        </div>
                    </button>
                </div>
            </div>

            <div class="feedback-panel" id="feedbackPanel">
                <div class="feedback-content" id="feedbackContent">
                    <p>Click on hazards in the scene above to identify them.</p>
                </div>
            </div>

            <div class="action-buttons">
                <button class="btn btn-secondary" onclick="resetHazardModule()">Reset Module</button>
                <button class="btn btn-primary" id="completeBtn" onclick="completeHazardModule()" disabled>
                    Complete Module
                    <span class="arrow">&#8594;</span>
                </button>
            </div>
        </main>

        <footer class="footer">
            <p>SafeTrain360 - CET257 Enterprise Project</p>
        </footer>
    </div>
    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            initHazardModule();
        });
    </script>
</body>
</html>
